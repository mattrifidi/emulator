<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="org.rifidi.ui.common.commands.NewReaderHandler"
            name="New Reader Handler">
      </command>
      <command
            id="org.rifidi.ui.common.commands.RemoveReader"
            name="Remove Reader">
      </command>
      <command
            id="org.rifidi.ui.common.commands.StartReader"
            name="Start Readers">
      </command>
      <command
            id="org.rifidi.ui.common.commands.StopReaders"
            name="Stop Readers">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.rifidi.ui.common.handlers.NewReaderHandler"
            commandId="org.rifidi.ui.common.commands.NewReaderHandler">
      </handler>
      <handler
            class="org.rifidi.ui.common.handlers.RemoveReaderHandler"
            commandId="org.rifidi.ui.common.commands.RemoveReader">
         <enabledWhen>
            <iterate
                  ifEmpty="false"
                  operator="and">
               <instanceof
                     value="org.rifidi.ui.common.reader.UIReader">
               </instanceof>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.rifidi.ui.common.handlers.StartReaderHandler"
            commandId="org.rifidi.ui.common.commands.StartReader">
         <enabledWhen>
            <iterate
                  ifEmpty="false"
                  operator="and">
               <and>
                  <instanceof
                        value="org.rifidi.ui.common.reader.UIReader">
                  </instanceof>
                  <or>
                     <test
                           property="org.rifidi.ui.common.reader.readerstate"
                           value="NEW">
                     </test>
                     <test
                           property="org.rifidi.ui.common.reader.readerstate"
                           value="STOPPED">
                     </test>
                  </or>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
      <handler
            class="org.rifidi.ui.common.handlers.StopReaderHandler"
            commandId="org.rifidi.ui.common.commands.StopReaders">
         <enabledWhen>
            <iterate
                  ifEmpty="false"
                  operator="and">
               <and>
                  <instanceof
                        value="org.rifidi.ui.common.reader.UIReader">
                  </instanceof>
                  <test
                        property="org.rifidi.ui.common.reader.readerstate"
                        value="RUNNING">
                  </test>
               </and>
            </iterate>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.rifidi.ui.common.testers.ReaderStatePropertyTester"
            id="org.rifidi.ui.common.reader"
            namespace="org.rifidi.ui.common.reader"
            properties="readerstate"
            type="java.lang.Object">
      </propertyTester>
   </extension>

</plugin>
